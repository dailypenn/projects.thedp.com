window.FlourishConfig={app_url:"https://app.flourish.studio",public_url:"https://public.flourish.studio/",embeds_url:"https://flo.uri.sh/"},function(){"use strict";var r,E;function S(){if(null==r){var t=function(){var t=window.location;"about:srcdoc"==t.href&&(t=window.parent.location);var i={};return function(t,r,e){for(;e=r.exec(t);)i[decodeURIComponent(e[1])]=decodeURIComponent(e[2])}(t.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),i}();r="referrer"in t?/^https:\/\/medium.com\//.test(t.referrer):!("auto"in t)}return r}function z(t){var r=t||window.innerWidth;return 999<r?650:599<r?575:400}function L(t,r){if(window.top!==window.self){var e=window;if("srcdoc"==e.location.pathname&&(e=e.parent),E)return t=parseInt(t,10),void e.parent.postMessage({sentinel:"amp",type:"embed-size",height:t},"*");var i={sender:"Flourish",context:"iframe.resize",method:"resize",height:t,src:e.location.toString()};if(r)for(var a in r)i[a]=r[a];e.parent.postMessage(JSON.stringify(i),"*")}}function O(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function I(a){window.addEventListener("message",function(r){if(null!=r.source&&(r.origin===document.location.origin||r.origin.match(/\/\/localhost:\d+$|\/\/flourish-api\.com$|\.flourish\.(?:local(:\d+)?|net|rocks|studio)$|\.uri\.sh$/))){var t;try{t=JSON.parse(r.data)}catch(t){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(r.data))}if("Flourish"===t.sender){for(var e=document.querySelectorAll("iframe"),i=0;i<e.length;i++)if(e[i].contentWindow==r.source||e[i].contentWindow==r.source.parent)return void a(t,e[i]);console.warn("could not find frame",t)}}}),O()&&(window.addEventListener("resize",t),t())}function t(){for(var t=document.querySelectorAll(".flourish-embed"),r=0;r<t.length;r++){var e=t[r];if(!e.getAttribute("data-width")){var i=e.querySelector("iframe"),a=window.getComputedStyle(e),o=e.offsetWidth-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight);i.style.width=o+"px"}}}function N(t,r,e,i){var a;e&&"number"==typeof e?(a=e,e+="px"):e&&e.match(/^[ \t\r\n\f]*([+-]?\d+|\d*\.\d+(?:[eE][+-]?\d+)?)(?:\\?[Pp]|\\0{0,4}[57]0(?:\r\n|[ \t\r\n\f])?)(?:\\?[Xx]|\\0{0,4}[57]8(?:\r\n|[ \t\r\n\f])?)[ \t\r\n\f]*$/)&&(a=parseFloat(e)),i&&"number"==typeof i&&(i+="px");var o=document.createElement("iframe");return o.setAttribute("scrolling","no"),o.setAttribute("frameborder","0"),o.setAttribute("title","Interactive or visual content"),r.appendChild(o),e?o.style.width=e:O()?o.style.width=r.offsetWidth+"px":o.style.width="100%",!i&&(t.match(/\?/)?t+="&auto=1":t+="?auto=1",i=z(a||o.offsetWidth)+"px"),i&&("%"===i.charAt(i.length-1)&&(i=parseFloat(i)/100*r.parentNode.offsetHeight+"px"),o.style.height=i),o.setAttribute("src",t),o}var U={de:{credits:{default:"Erstellt mit Flourish"}},en:{credits:{default:"A Flourish data visualization",chart:"A Flourish chart",map:{text:"A Flourish map",url:"https://flourish.studio/visualisations/maps/"},survey:{text:"A Flourish survey visualization",url:"https://flourish.studio/visualisations/survey-data/"},network:{text:"A Flourish network chart",url:"https://flourish.studio/visualisations/network-charts/"},scatter:{text:"A Flourish scatter chart",url:"https://flourish.studio/visualisations/scatter-charts/"},sankey:{text:"A Flourish sankey chart",url:"https://flourish.studio/visualisations/sankey-charts/"},quiz:"A Flourish quiz",bar_race:{text:"A Flourish bar chart race",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"A Flourish bar chart race",url:"https://flourish.studio/visualisations/bar-chart-race/"},cards:"Interactive content by Flourish",chord:"A Flourish chord diagram",election:"A Flourish election chart",globe:{text:"A Flourish connections globe",url:"https://flourish.studio/visualisations/maps/"},hierarchy:{text:"A Flourish hierarchy chart",url:"https://flourish.studio/visualisations/treemaps/"},"line-chart-race":"A Flourish line chart race",parliament:"A Flourish election chart","photo-slider":"Interactive content by Flourish",slope:{text:"A Flourish slope chart",url:"https://flourish.studio/visualisations/slope-charts/"},sports:"A Flourish sports visualization",explore:"A Flourish data visualization","word-cloud":"A Flourish data visualization"}},es:{credits:{default:"Creado con Flourish",bar_race:{text:"Créé avec Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Créé avec Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},fr:{credits:{default:"Créé avec Flourish",bar_race:{text:"Créé avec Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Créé avec Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},it:{credits:{default:"Creato con Flourish",bar_race:{text:"Creato con Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Creato con Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},mi:{credits:{default:"Hangaia ki te Flourish",bar_race:{text:"Hangaia ki te Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Hangaia ki te Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},nl:{credits:{default:"Gemaakt met Flourish",bar_race:{text:"Gemaakt met Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Gemaakt met Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},pt:{default:"Feito com Flourish",bar_race:{text:"Feito com Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Feito com Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}};function q(t,r,e,i){t=t||"https://flourish.studio",r=r||"?utm_source=api&utm_campaign="+window.location.href,e=e||"https://public.flourish.studio/",i=i||"A Flourish data visualisation";var a=document.createElement("div");a.setAttribute("class","flourish-credit"),a.setAttribute("style","width:100%!important;margin:0 0 4px!important;text-align:right!important;font-family:Helvetica,sans-serif!important;color:#888!important;font-size:11px!important;font-weight:bold!important;font-style:normal!important;-webkit-font-smoothing:antialiased!important;box-shadow:none!important;");var o=document.createElement("a");o.setAttribute("href",t+r),o.setAttribute("target","_top"),o.setAttribute("style","display:inline-block!important;text-decoration:none!important;font:inherit!important;color:inherit!important;border:none!important;margin:0 5px!important;box-shadow:none!important;"),a.appendChild(o);var s=document.createElement("img");s.setAttribute("alt","Flourish logo"),s.setAttribute("src",e+"resources/bosh.svg"),s.setAttribute("style","font:inherit!important;width:auto!important;height:12px!important;border:none!important;margin:0 2px 0!important;vertical-align:middle!important;display:inline-block!important;box-shadow:none!important;"),o.appendChild(s);var n=document.createElement("span");return n.setAttribute("style","font:inherit!important;color:#888!important;vertical-align:middle!important;display:inline-block!important;box-shadow:none!important;"),n.appendChild(document.createTextNode(i)),o.appendChild(n),a}function e(){if(!window.FlourishLoaded){window.FlourishLoaded=!0;var t=window.Flourish&&window.Flourish.external,r="en",e=document.querySelector("meta[name='language'],meta[name='LANGUAGE']");e&&e.hasAttribute("content")&&(r=e.getAttribute("content").substr(0,2),U[r]||(r="en"));var i,a=Array.prototype.slice.call(document.querySelectorAll(".flourish-embed"));if(!t)for(var o=document.querySelectorAll("script"),s=0;s<o.length;s++){var n=o[s];if(n.src&&n.src.match(/(?:\.flourish\.(?:net|rocks|studio)|(?:localhost|flourish\.local)(?::\d+)?)\//g)&&n.src.match(/\/embed\.js$/)){if(!i){var u=n.getAttribute("src");i=u.substr(0,u.lastIndexOf("/resources"))+"/"}if(n.getAttribute("data-src")){var l=document.createElement("div");l.setAttribute("class","flourish-embed"),l.setAttribute("data-src",n.getAttribute("data-src")),n.getAttribute("data-height")&&l.setAttribute("data-height",n.getAttribute("data-height")),n.getAttribute("data-width")&&l.setAttribute("data-width",n.getAttribute("data-width")),n.parentNode.insertBefore(l,n),a.push(l)}}}if(a.length){var h,c,d,p=(E="#amp=1"==window.location.hash,{createEmbedIframe:N,isFixedHeight:S,getHeightForBreakpoint:z,startEventListeners:I,notifyParentWindow:L,isSafari:O});for(s=0;s<a.length;s++){var f,m,b,g=a[s],v=g.getAttribute("data-src");if(v){var w,F=v.split("?"),A=1<F.length||window.Flourish&&window.Flourish.hide;if(v=F[0],m=t?(w=v,f=window.FlourishConfig.public_url,"?utm_source=embed&utm_campaign="+v):(w=(b=0===v.indexOf("template/"))?window.FlourishConfig.app_url+"/"+v+"/preview":window.FlourishConfig.embeds_url+v+"/embed",f=i+v+"/","?utm_source=showcase&utm_campaign="+v),p.createEmbedIframe(w,g,g.getAttribute("data-width"),g.getAttribute("data-height")),!b&&!A){for(var x="",y=g.className.split(" "),_=0;_<y.length;_++)if("flourish-embed"!=y[_]&&0==y[_].indexOf("flourish-")){x=y[_].substr(9);break}x||(x=0==v.indexOf("story")?"story":"default");var C=(d=c=void 0,h=(h=x)||"","object"==typeof(c=U[r||"en"].credits[h]||U.en.credits[h]||U.en.credits.default)&&(c.url&&(d=c.url),c=c.text),{credit_text:c,credit_url:d}),k=q(C.credit_url||f,m,window.FlourishConfig.public_url,C.credit_text);g.appendChild(k)}}}p.startEventListeners(function(t,r){"resize"==t.method&&("number"==typeof t.height&&(t.height+="px"),t.height&&(r.style.height=t.height))})}else console.warn("Flourish: could not find anything to embed")}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();
//# sourceMappingURL=embed.js.map
