<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>34th Street Dining Guide</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.css' rel='stylesheet' />
<link rel="stylesheet" href="stylesheet.css">
<script src="https://use.typekit.net/psa2uuo.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-707447-4', 'auto');
ga('create', 'UA-55281509-16', 'auto');
ga('send', 'pageview');
</script>
<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>

<script>
  googletag.cmd.push(function() {
    googletag.defineSlot('/12234093/DP.com-Top-Rectangle', [300, 250], 'div-gpt-ad-1476229155955-0').addService(googletag.pubads());
    googletag.defineSlot('/12234093/DP.com-mobile-leaderboard', [320, 50], 'div-gpt-ad-1476229155955-1').addService(googletag.pubads());
    googletag.pubads().enableSingleRequest();
    googletag.enableServices();
  });
</script>
</head>
<body>
  <div class='sidebar'>
    <div class='heading'>
      <a href="http://www.34st.com/">
        <img src="http://d8es5520nmizf.cloudfront.net/20150922QygWtuAXtg/dist/img/logo-2.png" width="120" />
      </a>
      <h1>Dining Guide <small>Fall 2016</small></h1>
    </div>
    <div id='listings' class='listings'></div>
    <div id="google-ad">
      <div id='div-gpt-ad-1476229155955-0' style='height:250px; width:300px;'>
        <script>
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1476229155955-0'); });
        </script>
      </div>
    </div>
  </div>
  <div id="google-ad-mobile">
    <div id='div-gpt-ad-1476229155955-1' style='height:50px; width:320px;'>
      <script>
      googletag.cmd.push(function() { googletag.display('div-gpt-ad-1476229155955-1'); });
      </script>
    </div>
  </div>

<div id='map' class='map'> </div>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoiZGFpbHlwZW5uIiwiYSI6ImNpanFueGV4cTAyeWx0b201dXpzeGU3aDEifQ.6V-cf4TqyBJ9Yj9XXjQVJA';


var geojson = [
  {
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.201351, 39.954212]
        },
        "properties": {
          "title": "Tap House",
          "description": "",
          "address":"3925 Walnut Street",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.196174, 39.953923]
        },
        "properties": {
          "title": "Pod",
          "description": "",
          "address":"3636 Sansom St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.192429, 39.953549]
        },

        "properties": {
          "title": "Baby Blues BBQ",
          "description": "",
          "address":"3402 Sansom St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.192976, 39.953603]
        },
        "properties": {
          "title": "White Dog Cafe",
          "description": "",
          "address":"3420 Sansom St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.188595, 39.953641]
        },
        "properties": {
          "title": "Shake Shack",
          "description": "",
          "address":"3200 Chestnut St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.168213, 39.947288]
        },
        "properties": {
          "title": "Plenty Café",
          "description": "",
          "address":"1602 Spruce St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.157839, 39.944538]
        },
        "properties": {
          "title": "Good Karma Cafe",
          "description": "",
          "address":"928 Pine St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.170787, 39.944407]
        },
        "properties": {
          "title": "Pumpkin",
          "description": "",
          "address":"1713 South St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.172154, 39.952044]
        },
        "properties": {
          "title": "Square On Square",
          "description": "",
          "address":"1905 Chestnut St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.211976, 39.952929]
        },
        "properties": {
          "title": "The Farmacy",
          "description": "",
          "address":"4443 Spruce Street",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.174559, 39.948275]
        },
        "properties": {
          "title": "Audrey Claire",
          "description": "",
          "address":"276 S 20th St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.170477, 39.951471]
        },
        "properties": {
          "title": "Mac Mart",
          "description": "",
          "address":"104 S 18th St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.140700, 39.965636]
        },
        "properties": {
          "title": "Poke Bowl",
          "description": "",
          "address":"958 N 2nd St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.155503, 39.949134]
        },
        "properties": {
          "title": "Di Bruno Bros.",
          "description": "",
          "address":"834 Chestnut St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.207458, 39.955086]
        },
        "properties": {
          "title": "Walnut Hill Restaurant School",
          "description": "",
          "address":"4207 Walnut St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.159004, 39.953067]
        },
        "properties": {
          "title": "Reading Terminal Market",
          "description": "",
          "address":"51 N 12th St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [-75.146460, 39.938004]
        },
        "properties": {
          "title": "Royal Sushi",
          "description": "",
          "address":"780 S. 2nd St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.174434, 39.948586]
        },
        "properties": {
          "title": "Spread Bagelry",
          "description": "The “Montreal Style” bagels that Spread Bagelry is known for are thinner, smaller and have a sweet, smoky flavor that you won’t find in New York.",
          "address":"4301 Baltimore Ave",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.175048, 39.945662]
        },
        "properties": {
          "title": "Lou Bird's",
          "description": "",
          "address":"500 S 20th St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.163703, 39.929509]
        },
        "properties": {
          "title": "ITV",
          "description": "",
          "address":"1615 E Passyunk Ave",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.169845, 39.957064]
        },
        "properties": {
          "title": "Assembly Rooftop Lounge",
          "description": "",
          "address":"1840 Benjamin Franklin Pkwy",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.151961, 39.928671]
        },
        "properties": {
          "title": "The Dutch",
          "description": "",
          "address":"1527 S 4th St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.166557, 39.950329]
        },
        "properties": {
          "title": "Mission Taqueria",
          "description": "",
          "address":"1516 Sansom St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.174879, 39.952129]
        },
        "properties": {
          "title": "Butcher Bar",
          "description": "",
          "address":"2034 Chestnut St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.162001, 39.950164]
        },
        "properties": {
          "title": "Tiki",
          "description": "",
          "address":"102 S 13th St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.159633, 39.948871]
        },
        "properties": {
          "title": "Destination Dogs",
          "description": "",
          "address":"1111 Walnut St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.158792, 39.950106]
        },
        "properties": {
          "title": "MilkBoy",
          "description": "",
          "address":"1100 Chestnut St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.199279, 39.951516]
        },
        "properties": {
          "title": "Bui's Food Truck",
          "description": "",
          "address":"Outside 298 S University Ave",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      },
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [ -75.144372, 39.951965]
        },
        "properties": {
          "title": "Ici Macaron",
          "description": "",
          "address":"230 Arch St",
          "marker-color": "#3096B0",
          "marker-size": "large",
          "marker-symbol": "restaurant",
          "url": ""
        }
      }
    ]
  }
];
var map = L.mapbox.map('map', '', {attributionControl: false})
  .setView([39.951612, -75.195022], 14);

var listings = document.getElementById('listings');
var locations = L.mapbox.featureLayer().addTo(map);
locations.setGeoJSON(geojson);
L.mapbox.styleLayer('mapbox://styles/dailypenn/cijqnygqv005y94kqwb3xs46l').addTo(map);
map.zoomControl.removeFrom(map);

var credits = L.control.attribution().addTo(map);
credits.addAttribution('©2016 The Daily Pennsylvanian. Maps © Mapbox © OpenStreetMaps');

function setActive(el) {
    var siblings = listings.getElementsByTagName('div');
    for (var i = 0; i < siblings.length; i++) {
      siblings[i].className = siblings[i].className
      .replace(/active/, '').replace(/\s\s*$/, '');
    }

    el.className += ' active';
  }

  locations.eachLayer(function(locale) {

    // Shorten locale.feature.properties to just `prop` so we're not
    // writing this long form over and over again.
    var prop = locale.feature.properties;

    // Each marker on the map.
    var popup = '<h3>' + prop.title + '</h3> <div class="tooltip-content">' + prop.description +
                '<p><a href=\"' + prop.url +'\" target=\"_blank\"">' + 'Read more on 34st.com'+ '</a></p>' ;

    var listing = listings.appendChild(document.createElement('div'));
    listing.className = 'item';

    var link = listing.appendChild(document.createElement('a'));
    link.href = '#';
    link.className = 'title';

    link.innerHTML = prop.title;

    var details = listing.appendChild(document.createElement('div'));
    details.innerHTML = '<i>'+ prop.address +'</i><br> ' + prop.description;
    if (prop.phone) {
      details.innerHTML += ' &middot; ' + prop.phoneFormatted;
    }

    link.onclick = function() {
      setActive(listing);

      // When a menu item is clicked, animate the map to center
      // its associated locale and open its popup.
      map.setView(locale.getLatLng(), 16);
      locale.openPopup();
      return false;
    };

    // Marker interaction
    locale.on('click', function(e) {
      // 1. center the map on the selected marker.
      map.panTo(locale.getLatLng());

      // 2. Set active the markers associated listing.
      setActive(listing);
    });

    popup += '</div>';
    locale.bindPopup(popup);


});

</script>
</body>
</html>
